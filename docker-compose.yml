version: "3.9"
services:

  tools:
    build: .
    image: mertcingoz/udmi-cli
    platform: linux/amd64
    stdin_open: true
    tty: true
    working_dir: /app
    volumes:
      - type: bind
        source: udmi
        target: /app
      - type: bind
        source: ~/.config
        target: /root/.config
      - type: bind
        source: scripts
        target: /scripts
    environment:
      UDMI_TAG: master
      UDMI_VERSION: b5f1464a #Jul 15, 2023
      IOT_PROVIDER: ${IOT_PROVIDER}
      GOOGLE_CLOUD_PROJECT: ${GOOGLE_CLOUD_PROJECT}
      GOOGLE_CLOUD_REGION: ${GOOGLE_CLOUD_REGION}
      GOOGLE_CLOUD_REGISTRY: ${GOOGLE_CLOUD_REGISTRY}
      UDMI_REFLECT_REGISTRY: ${UDMI_REFLECT_REGISTRY}
      UDMI_ALT_REGISTRY: ${UDMI_ALT_REGISTRY}
